import{r as l,u as m,j as e,S as h,T as x,F as g,a as o,y as f}from"./index-DPRp_zFp.js";import{u as j,L as w,T as y,P as b}from"./use-form-DgmctiLj.js";import{T as S,P as k,B as u}from"./Button-CgdAvKzM.js";const I=()=>{const[a,n]=l.useState(!1),s=l.useRef(!1),{navigate:c}=m(),r=j({initialValues:{nickname:"",password:""},validate:{nickname:t=>t.length>0||s.current?null:"Введите ваш никнейм",password:t=>t.length>0||s.current?null:"Пароль не может быть пустым"}}),i=async t=>{n(!0);try{s.current?await o.signInAnonym():await o.signIn(t),c({to:"/"})}catch(p){f(`Ошибка при входе: ${p}`,{type:"error"})}finally{n(!1),s.current=!1}},d=async t=>{t.preventDefault(),t.stopPropagation(),s.current=!0,r.reset(),await i(r.values),s.current=!1};return e.jsxs(h,{p:0,m:"0 auto",justify:"center",gap:"xl",h:"100%",maw:800,children:[e.jsx(x,{ta:"center",children:"Вход в аккаунт"}),e.jsxs(S,{color:"dimmed",size:"sm",ta:"center",children:["Нет аккаунта? ",e.jsx(w,{to:"/sign-up",children:"Зарегистрироваться"})]}),e.jsx(k,{withBorder:!0,p:"xl",radius:"md",children:e.jsxs("form",{onSubmit:r.onSubmit(i),style:{display:"flex",flexDirection:"column",gap:32},children:[e.jsx(y,{label:"Никнейм",placeholder:"Введите ваш никнейм",size:"lg",...r.getInputProps("nickname"),withAsterisk:!0}),e.jsx(b,{label:"Пароль",placeholder:"Введите пароль",size:"lg",...r.getInputProps("password"),withAsterisk:!0}),e.jsxs(g,{gap:"md",wrap:"wrap",children:[e.jsx(u,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:a,disabled:a,miw:250,flex:1,onClick:d,children:"Войти как аноним"}),e.jsx(u,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:a,disabled:a,miw:250,flex:1,children:"Войти"})]})]})})]})};function z(){return e.jsx(I,{})}export{z as default};
