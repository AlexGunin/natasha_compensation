import{r as l,u as m,a as h,j as e,S as x,T as g,P as f,b as j,F as w,B as o,c as u,y}from"./index-BX7Ni4qn.js";import{L as b,P as S}from"./PasswordInput-B-p2-Ytx.js";import{T as k}from"./Text-B6qgXP1S.js";const I=()=>{const[a,n]=l.useState(!1),s=l.useRef(!1),{navigate:c}=m(),r=h({initialValues:{nickname:"",password:""},validate:{nickname:t=>t.length>0||s.current?null:"Введите ваш никнейм",password:t=>t.length>0||s.current?null:"Пароль не может быть пустым"}}),i=async t=>{n(!0);try{s.current?await u.signInAnonym():await u.signIn(t),c({to:"/"})}catch(p){y(`Ошибка при входе: ${p}`,{type:"error"})}finally{n(!1),s.current=!1}},d=async t=>{t.preventDefault(),t.stopPropagation(),s.current=!0,r.reset(),await i(r.values),s.current=!1};return e.jsxs(x,{p:0,m:"0 auto",justify:"center",gap:"xl",h:"100%",maw:800,children:[e.jsx(g,{ta:"center",children:"Вход в аккаунт"}),e.jsxs(k,{color:"dimmed",size:"sm",ta:"center",children:["Нет аккаунта? ",e.jsx(b,{to:"/sign-up",children:"Зарегистрироваться"})]}),e.jsx(f,{withBorder:!0,p:"xl",radius:"md",children:e.jsxs("form",{onSubmit:r.onSubmit(i),style:{display:"flex",flexDirection:"column",gap:32},children:[e.jsx(j,{label:"Никнейм",placeholder:"Введите ваш никнейм",size:"lg",...r.getInputProps("nickname"),withAsterisk:!0}),e.jsx(S,{label:"Пароль",placeholder:"Введите пароль",size:"lg",...r.getInputProps("password"),withAsterisk:!0}),e.jsxs(w,{gap:"md",wrap:"wrap",children:[e.jsx(o,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:a,disabled:a,miw:250,flex:1,onClick:d,children:"Войти как аноним"}),e.jsx(o,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:a,disabled:a,miw:250,flex:1,children:"Войти"})]})]})})]})};function A(){return e.jsx(I,{})}export{A as default};
