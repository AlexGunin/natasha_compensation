import{r as o,u as p,j as e,S as g,T as h,F as x,a as u}from"./index-EsirFsmB.js";import{u as f,L as j,T as w,P as y}from"./use-form-BgprFuDj.js";import{T as I,P as S,B as c}from"./Button-Bp81vfLU.js";const b=()=>{const[r,i]=o.useState(!1),t=o.useRef(!1),{navigate:d}=p(),n=f({initialValues:{nickname:"",password:""},validate:{nickname:s=>s.length>0||t.current?null:"Введите ваш никнейм",password:s=>s.length>0||t.current?null:"Пароль не может быть пустым"}}),l=async s=>{i(!0);try{if(t.current)await u.signInAnonym();else{const a=await u.signIn(s);console.log("SIGN IN",a)}d({to:"/"})}catch(a){console.error("Ошибка при входе",a)}finally{i(!1),t.current=!1}},m=async s=>{s.preventDefault(),s.stopPropagation(),t.current=!0,n.reset(),await l(n.values),t.current=!1};return e.jsxs(g,{p:0,m:"0 auto",justify:"center",gap:"xl",h:"100%",maw:800,children:[e.jsx(h,{ta:"center",children:"Вход в аккаунт"}),e.jsxs(I,{color:"dimmed",size:"sm",ta:"center",children:["Нет аккаунта? ",e.jsx(j,{to:"/sign-up",children:"Зарегистрироваться"})]}),e.jsx(S,{withBorder:!0,p:"xl",radius:"md",children:e.jsxs("form",{onSubmit:n.onSubmit(l),style:{display:"flex",flexDirection:"column",gap:32},children:[e.jsx(w,{label:"Никнейм",placeholder:"Введите ваш никнейм",size:"lg",...n.getInputProps("nickname"),withAsterisk:!0}),e.jsx(y,{label:"Пароль",placeholder:"Введите пароль",size:"lg",...n.getInputProps("password"),withAsterisk:!0}),e.jsxs(x,{gap:"md",wrap:"wrap",children:[e.jsx(c,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:r,disabled:r,miw:250,flex:1,onClick:m,children:"Войти как аноним"}),e.jsx(c,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:r,disabled:r,miw:250,flex:1,children:"Войти"})]})]})})]})};function T(){return e.jsx(b,{})}export{T as default};
