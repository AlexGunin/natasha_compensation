import{_ as O,j as t,$ as M,p as F,q as A,a0 as me,a1 as ve,a2 as I,s as xe,t as ye,v as Z,a3 as K,C as J,a4 as X,a5 as ge,a6 as fe,a7 as pe,D as B,a8 as be,a9 as w,aa as je,ab as R,F as U,b as z,A as D,G as Ce,ac as Ae,ad as we,H as ee,V as _e,ae as Ne,af as Ie,y as ke,Z as Pe,ag as Se,Y as te,ah as Te,L as $e,T as ne,ai as Q,B as Be}from"./index-BG9YWu5T.js";import{C as Me,G as Re}from"./Group-tG4aLtgL.js";const[ze,E]=O("Accordion component was not found in the tree");function L({style:e,size:o=16,...n}){return t.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:M(o),height:M(o),display:"block"},...n,children:t.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}L.displayName="@mantine/core/AccordionChevron";const[De,oe]=O("Accordion.Item component was not found in the tree");var k={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Fe={},H=F((e,o)=>{const{classNames:n,className:a,style:s,styles:i,vars:h,chevron:c,icon:d,onClick:u,onKeyDown:l,children:P,disabled:g,mod:b,..._}=A("AccordionControl",Fe,e),{value:v}=oe(),r=E(),j=r.isItemActive(v),S=typeof r.order=="number",N=`h${r.order}`,C=t.jsxs(me,{..._,...r.getStyles("control",{className:a,classNames:n,style:s,styles:i,variant:r.variant}),unstyled:r.unstyled,mod:["accordion-control",{active:j,"chevron-position":r.chevronPosition,disabled:g},b],ref:o,onClick:x=>{u==null||u(x),r.onChange(v)},type:"button",disabled:g,"aria-expanded":j,"aria-controls":r.getRegionId(v),id:r.getControlId(v),onKeyDown:ve({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:r.loop,orientation:"vertical",onKeyDown:l}),children:[t.jsx(I,{component:"span",mod:{rotate:!r.disableChevronRotation&&j,position:r.chevronPosition},...r.getStyles("chevron",{classNames:n,styles:i}),children:c||r.chevron}),t.jsx("span",{...r.getStyles("label",{classNames:n,styles:i}),children:P}),d&&t.jsx(I,{component:"span",mod:{"chevron-position":r.chevronPosition},...r.getStyles("icon",{classNames:n,styles:i}),children:d})]});return S?t.jsx(N,{...r.getStyles("itemTitle",{classNames:n,styles:i}),children:C}):C});H.displayName="@mantine/core/AccordionControl";H.classes=k;const Ue={},q=F((e,o)=>{const{classNames:n,className:a,style:s,styles:i,vars:h,value:c,mod:d,...u}=A("AccordionItem",Ue,e),l=E();return t.jsx(De,{value:{value:c},children:t.jsx(I,{ref:o,mod:[{active:l.isItemActive(c)},d],...l.getStyles("item",{className:a,classNames:n,styles:i,style:s,variant:l.variant}),...u})})});q.displayName="@mantine/core/AccordionItem";q.classes=k;const Ee={},W=F((e,o)=>{const{classNames:n,className:a,style:s,styles:i,vars:h,children:c,...d}=A("AccordionPanel",Ee,e),{value:u}=oe(),l=E();return t.jsx(Me,{ref:o,...l.getStyles("panel",{className:a,classNames:n,style:s,styles:i}),...d,in:l.isItemActive(u),transitionDuration:l.transitionDuration??200,role:"region",id:l.getRegionId(u),"aria-labelledby":l.getControlId(u),children:t.jsx("div",{...l.getStyles("content",{classNames:n,styles:i}),children:c})})});W.displayName="@mantine/core/AccordionPanel";W.classes=k;const Le={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:t.jsx(L,{})},He=J((e,{transitionDuration:o,chevronSize:n,radius:a})=>({root:{"--accordion-transition-duration":o===void 0?void 0:`${o}ms`,"--accordion-chevron-size":n===void 0?void 0:M(n),"--accordion-radius":a===void 0?void 0:X(a)}}));function m(e){const o=A("Accordion",Le,e),{classNames:n,className:a,style:s,styles:i,unstyled:h,vars:c,children:d,multiple:u,value:l,defaultValue:P,onChange:g,id:b,loop:_,transitionDuration:v,disableChevronRotation:r,chevronPosition:j,chevronSize:S,order:N,chevron:C,variant:x,radius:yt,...re}=o,$=xe(b),[f,le]=ye({value:l,defaultValue:P,finalValue:u?[]:null,onChange:g}),ce=p=>Array.isArray(f)?f.includes(p):p===f,de=p=>{const ue=Array.isArray(f)?f.includes(p)?f.filter(he=>he!==p):[...f,p]:p===f?null:p;le(ue)},G=Z({name:"Accordion",classes:k,props:o,className:a,style:s,classNames:n,styles:i,unstyled:h,vars:c,varsResolver:He});return t.jsx(ze,{value:{isItemActive:ce,onChange:de,getControlId:K(`${$}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:K(`${$}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:v,disableChevronRotation:r,chevronPosition:j,order:N,chevron:C,loop:_,getStyles:G,variant:x,unstyled:h},children:t.jsx(I,{...G("root"),id:$,...re,variant:x,"data-accordion":!0,children:d})})}const qe=e=>e;m.extend=qe;m.withProps=ge(m);m.classes=k;m.displayName="@mantine/core/Accordion";m.Item=q;m.Panel=W;m.Control=H;m.Chevron=L;var ae={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const We={},Ve=J((e,{radius:o,color:n,gradient:a,variant:s,size:i,autoContrast:h})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:a,variant:s||"filled",autoContrast:h});return{root:{"--badge-height":B(i,"badge-height"),"--badge-padding-x":B(i,"badge-padding-x"),"--badge-fz":B(i,"badge-fz"),"--badge-radius":o===void 0?void 0:X(o),"--badge-bg":n||s?c.background:void 0,"--badge-color":n||s?c.color:void 0,"--badge-bd":n||s?c.border:void 0,"--badge-dot-color":s==="dot"?pe(n,e):void 0}}}),T=fe((e,o)=>{const n=A("Badge",We,e),{classNames:a,className:s,style:i,styles:h,unstyled:c,vars:d,radius:u,color:l,gradient:P,leftSection:g,rightSection:b,children:_,variant:v,fullWidth:r,autoContrast:j,circle:S,mod:N,...C}=n,x=Z({name:"Badge",props:n,classes:ae,className:s,style:i,classNames:a,styles:h,unstyled:c,vars:d,varsResolver:Ve});return t.jsxs(I,{variant:v,mod:[{block:r,circle:S,"with-right-section":!!b,"with-left-section":!!g},N],...x("root",{variant:v}),ref:o,...C,children:[g&&t.jsx("span",{...x("section"),"data-position":"left",children:g}),t.jsx("span",{...x("label"),children:_}),b&&t.jsx("span",{...x("section"),"data-position":"right",children:b})]})});T.classes=ae;T.displayName="@mantine/core/Badge";const Ge={};function V(e){const o=A("NumberFormatter",Ge,e),{value:n,defaultValue:a,...s}=o;return n===void 0?null:t.jsx(be,{displayType:"text",value:n,...s})}const Ke=e=>e;V.extend=Ke;V.displayName="@mantine/core/NumberFormatter";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ye=w("chevron-down",Qe);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ze=w("minus",Oe);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xe=w("plus",Je);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tt=w("square-pen",et);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ot=w("trash-2",nt);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],st=w("undo-2",at),it=e=>t.jsx("div",{"data-onboarding":"catalog-grid",style:{display:"grid",gap:48,gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",width:"100%"},children:e.children}),se=e=>t.jsx(V,{value:e.value,thousandSeparator:" ",suffix:" ₽"}),rt={root:{background:"var(--app-highlight-gradient)"}},lt=e=>t.jsx(T,{size:e.size??"xl",variant:"gradient",styles:rt,children:t.jsx(se,{value:e.value})}),y={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},slide:{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}},scale:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95}}},ct=e=>{const o=e.animation??"fade",n=e.duration??400;return t.jsx(R.div,{initial:y[o].initial,animate:y[o].animate,exit:y[o].exit,transition:{duration:n},style:{position:"relative",...e==null?void 0:e.style},className:e.className,children:e.children},e.value)},ie=({isActiveFirst:e,first:o,second:n,animation:a="fade",duration:s=.3,styles:i={}})=>t.jsx(je,{mode:"popLayout",children:e?t.jsx(R.div,{initial:y[a].initial,animate:y[a].animate,exit:y[a].exit,transition:{duration:s},style:{position:"relative",...i.first},children:o},"first"):t.jsx(R.div,{initial:y[a].initial,animate:y[a].animate,exit:y[a].exit,transition:{duration:s},style:{position:"relative",...i.second},children:n},"second")});ie.Item=ct;const dt=e=>{const o=()=>{e.data.onUndo(),e.closeToast(!0)};return t.jsxs(U,{align:"center",gap:"md",justify:"space-between",flex:1,children:[t.jsx(z,{children:e.data.title??"Элемент будет удален"}),t.jsx(D,{size:"xl",variant:"light",color:"gray",onClick:o,children:t.jsx(st,{size:24})})]})},ut=e=>{const o=Ce(),{showContextMenu:n}=Ae(),{open:a,close:s}=we(),{markToDelete:i,unmarkToDelete:h}=ee(),c=_e();return(o==null?void 0:o.role)===Ne.ADMIN?n([{key:"edit",icon:t.jsx(tt,{size:14}),title:"Редактировать",onClick:()=>a({children:t.jsx(Ie,{item:e,onSubmit:s}),title:`Редактирование льготы «${e.name}»`})},{key:"delete",icon:t.jsx(ot,{size:14}),title:"Удалить",onClick:()=>{i(e.id),ke.warning(dt,{onClose:async d=>{d||(await Pe.benefits.delete(e.id),c.invalidateQueries({queryKey:[Se]}),h(e.id))},closeButton:!1,autoClose:3e3,pauseOnHover:!1,data:{onUndo:()=>h(e.id)}})}}]):void 0},Y={marginTop:"auto"},ht=e=>{const{added:o,add:n,remove:a,getQuantity:s,checkCanAdd:i}=te(),{markedToDelete:h}=ee(),c=ut(e),d=o.has(e.id),u=s(e.id),l=i(e);return t.jsxs(Te,{shadow:d?"xl":"sm",padding:"lg",radius:"md",withBorder:!0,style:{display:"flex",flexDirection:"column",gap:24,boxShadow:d?`0px 0px 8px 2px ${$e("var(--mantine-color-blue-filled)",30)}`:void 0,opacity:h.has(e.id)?.2:1},onContextMenu:c,children:[t.jsxs(Re,{justify:"space-between",children:[t.jsx(ne,{order:3,fw:500,children:e.name}),t.jsx(lt,{value:e.price})]}),e.description?t.jsx(z,{size:"lg",c:"dimmed",mb:"md",children:e.description}):null,t.jsx(ie,{isActiveFirst:d,first:t.jsxs(U,{gap:"md",align:"center",justify:"center",children:[t.jsx(D,{onClick:()=>a(e),size:"xl",flex:1,radius:"md",variant:"light",color:u===1?"red":void 0,children:t.jsx(Ze,{})}),t.jsx(z,{size:"xl",miw:50,ta:"center",children:u}),t.jsx(Q,{label:l.value?null:l.reason,children:t.jsx(D,{disabled:!l.value,onClick:()=>n(e),size:"xl",variant:"light",flex:1,radius:"md","data-onboarding":"benefit-add",children:t.jsx(Xe,{})})})]}),second:t.jsx(Q,{label:l.value?null:l.reason,children:t.jsx(Be,{color:"blue",size:"md",fullWidth:!0,radius:"md",variant:"light",disabled:!l.value,onClick:()=>n(e),"data-onboarding":"benefit-add",children:"Добавить"})}),styles:{first:Y,second:Y}})]})},mt={self:"Личные",family:"Семейные",all:"Все"},vt={root:{display:"flex",flexDirection:"column",gap:40},content:{padding:0,paddingBottom:32},control:{paddingInline:0,marginBottom:16},chevron:{display:"flex",width:"fit-content"},icon:{width:36}},xt=["self","family"],pt=e=>{const{getQuantity:o}=te();return t.jsx(m,{multiple:!0,defaultValue:e.defaultValue??xt,styles:vt,chevronPosition:"left",children:e.items.map(([n,a])=>t.jsxs(m.Item,{value:n,children:[t.jsx(m.Control,{chevron:t.jsx(Ye,{size:28,strokeWidth:2}),children:t.jsxs(U,{align:"center",justify:"space-between",children:[t.jsx(ne,{order:3,fw:"normal",children:mt[n]}),t.jsx(T,{size:"xl",variant:"transparent",color:"var(--mantine-font-color)",children:t.jsx(se,{value:a.reduce((s,i)=>s+i.price*o(i.id),0)})})]})}),t.jsx(m.Panel,{children:t.jsx(it,{children:a.map(s=>t.jsx(ht,{...s},s.id))})})]},n))})};export{pt as A,T as B,it as C,se as P,mt as S,ht as a};
