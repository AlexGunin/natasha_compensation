import{r as l,u as m,a as h,j as e,S as x,T as g,b as f,P as j,c as w,F as y,B as o,d as u,y as b}from"./index-BG9YWu5T.js";import{L as S,P as k,u as I}from"./use-redirect-DcAFaF8N.js";const P=()=>{const[r,n]=l.useState(!1),t=l.useRef(!1),{navigate:c}=m(),a=h({initialValues:{nickname:"",password:""},validate:{nickname:s=>s.length>0||t.current?null:"Введите ваш никнейм",password:s=>s.length>0||t.current?null:"Пароль не может быть пустым"}}),i=async s=>{n(!0);try{t.current?await u.signInAnonym():await u.signIn(s),c({to:"/"})}catch(p){b(`Ошибка при входе: ${p}`,{type:"error"})}finally{n(!1),t.current=!1}},d=async s=>{s.preventDefault(),s.stopPropagation(),t.current=!0,a.reset(),await i(a.values),t.current=!1};return e.jsxs(x,{p:0,m:"0 auto",justify:"center",gap:"xl",h:"100%",maw:800,children:[e.jsx(g,{ta:"center",children:"Вход в аккаунт"}),e.jsxs(f,{color:"dimmed",size:"sm",ta:"center",children:["Нет аккаунта? ",e.jsx(S,{to:"/sign-up",children:"Зарегистрироваться"})]}),e.jsx(j,{withBorder:!0,p:"xl",radius:"md",children:e.jsxs("form",{onSubmit:a.onSubmit(i),style:{display:"flex",flexDirection:"column",gap:32},children:[e.jsx(w,{label:"Никнейм",placeholder:"Введите ваш никнейм",size:"lg",...a.getInputProps("nickname"),withAsterisk:!0}),e.jsx(k,{label:"Пароль",placeholder:"Введите пароль",size:"lg",...a.getInputProps("password"),withAsterisk:!0}),e.jsxs(y,{gap:"md",wrap:"wrap",children:[e.jsx(o,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:r,disabled:r,miw:250,flex:1,onClick:d,children:"Войти как аноним"}),e.jsx(o,{type:"submit",size:"lg",variant:"light",fullWidth:!0,loading:r,disabled:r,miw:250,flex:1,children:"Войти"})]})]})})]})};function A(){return I(),e.jsx(P,{})}export{A as default};
